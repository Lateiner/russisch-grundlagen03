<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch Pr√§positiv: Endungen erg√§nzen</title>
    <style>
        :root {
            /* Farbschema: Gr√ºnt√∂ne */
            --bg-color: #f1f8e9;           /* Hintergrund hell */
            --card-bg: #ffffff;            /* Karte Wei√ü */
            --primary-dark: #2e7d32;       /* Dunkelgr√ºn Texte */
            --primary-light: #4caf50;      /* Standard Gr√ºn Buttons */
            --accent-color: #a5d6a7;       /* Selektion Hintergrund */
            --gap-color: #333;             /* Farbe der L√ºcke */
            
            --correct-bg: #c8e6c9;         /* Richtig Hintergrund */
            --correct-text: #2e7d32;       /* Richtig Text */
            --wrong-bg: #ffcdd2;           /* Falsch Hintergrund */
            --wrong-text: #c62828;         /* Falsch Text */

            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --radius: 16px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 20px;
            padding-bottom: 100px; /* Platz f√ºr Footer */
            line-height: 1.5;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary-dark);
        }

        h1 { margin: 0; font-size: 1.8rem; }
        .subtitle { margin-top: 5px; opacity: 0.8; }

        /* --- GRID LAYOUT --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        /* --- CARD STYLING --- */
        .card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border-top: 5px solid var(--primary-light);
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }

        .emoji {
            font-size: 4rem;
            margin-bottom: 10px;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
        }

        .hint {
            font-size: 0.9rem;
            color: #777;
            margin-bottom: 15px;
            font-style: italic;
            height: 20px; /* Feste H√∂he f√ºr Ausrichtung */
        }

        .word-container {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 25px;
            background: #fafafa;
            padding: 10px 20px;
            border-radius: 8px;
            width: 100%;
            box-sizing: border-box;
        }

        /* Die L√ºcke */
        .gap {
            display: inline-block;
            min-width: 30px;
            border-bottom: 3px solid var(--gap-color);
            color: var(--primary-light);
            padding: 0 2px;
            transition: all 0.3s;
        }

        /* Feedback Zust√§nde der L√ºcke */
        .gap.filled { border-bottom-color: var(--primary-light); }
        .gap.correct { color: var(--correct-text); border-bottom-color: var(--correct-text); }
        .gap.wrong { color: var(--wrong-text); border-bottom-color: var(--wrong-text); }

        /* --- BUTTONS (Rund) --- */
        .options-container {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .option-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid #e0e0e0;
            background-color: white;
            font-size: 1.2rem;
            font-weight: bold;
            color: #555;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Touch-Optimierung */
            touch-action: manipulation;
        }

        .option-btn:hover {
            background-color: #f1f8e9;
            border-color: var(--primary-light);
        }

        /* Aktiver/Gew√§hlter Button */
        .option-btn.active {
            background-color: var(--primary-dark);
            color: white;
            border-color: var(--primary-dark);
            transform: scale(1.1);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Feedback Buttons */
        .option-btn.mark-correct {
            background-color: var(--correct-bg);
            border-color: var(--correct-text);
            color: var(--correct-text);
        }
        
        .option-btn.mark-wrong {
            opacity: 0.5;
            background-color: #eee;
        }

        /* --- STEUERUNG (Unten) --- */
        .controls {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            gap: 15px;
            z-index: 100;
        }

        .ctrl-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: opacity 0.2s, transform 0.1s;
            min-width: 140px;
        }

        .ctrl-btn:active { transform: scale(0.95); }
        .ctrl-btn:hover { opacity: 0.9; }

        .btn-check { background-color: var(--primary-dark); }
        .btn-reset { background-color: #757575; }
        .btn-solve { background-color: #ff9800; }

        /* Mobile */
        @media (max-width: 600px) {
            .grid-container { grid-template-columns: 1fr; }
            .controls { flex-direction: column; gap: 10px; }
            .ctrl-btn { width: 100%; }
            body { padding-bottom: 180px; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Pr√§positiv: Die richtige Endung</h1>
        <div class="subtitle">W√§hle die passende Endung (–µ, –∏, —É) f√ºr den markierten Kontext.</div>
    </header>

    <div class="grid-container" id="app">
        <!-- Karten werden per JS generiert -->
    </div>
</div>

<div class="controls">
    <button class="ctrl-btn btn-check" onclick="checkAnswers()">√úberpr√ºfen</button>
    <button class="ctrl-btn btn-reset" onclick="resetAnswers()">Zur√ºcksetzen</button>
    <button class="ctrl-btn btn-solve" onclick="showSolution()">L√∂sung anzeigen</button>
</div>

<script>
    /*
     * Datenmodell
     * stem: Der Wortstamm inkl. Pr√§position
     * correct: Die richtige Endung
     * options: Array der m√∂glichen Buttons
     * hint: √úbersetzung/Hinweis
     */
    const tasks = [
        { id: 1, emoji: 'üè´', hint: 'in der Schule', stem: '–≤ —à–∫–æ–ª', correct: '–µ', options: ['–∞', '–µ', '–∏'] },
        { id: 2, emoji: 'üá∑üá∫', hint: 'in Russland (-–∏—è)', stem: '–≤ –†–æ—Å—Å–∏', correct: '–∏', options: ['–µ', '–∏', '—è'] },
        { id: 3, emoji: 'üå≤', hint: 'im Wald (Ausnahme!)', stem: '–≤ –ª–µ—Å', correct: '—É', options: ['–µ', '—É', '–∞'] },
        { id: 4, emoji: 'üçΩÔ∏è', hint: 'auf dem Tisch', stem: '–Ω–∞ —Å—Ç–æ–ª', correct: '–µ', options: ['—É', '–∏', '–µ'] },
        { id: 5, emoji: 'üèüÔ∏è', hint: 'auf dem Platz (-—å)', stem: '–Ω–∞ –ø–ª–æ—â–∞–¥', correct: '–∏', options: ['–µ', '—å', '–∏'] },
        { id: 6, emoji: '‚úàÔ∏è', hint: 'am Flughafen (Ausnahme!)', stem: '–≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç', correct: '—É', options: ['–µ', '—É', '–∞'] },
        { id: 7, emoji: 'üè≠', hint: 'im Werk/in der Fabrik', stem: '–Ω–∞ –∑–∞–≤–æ–¥', correct: '–µ', options: ['–µ', '—É', '–æ–º'] },
        { id: 8, emoji: 'üè•', hint: 'im Sanatorium (-–∏–π)', stem: '–≤ —Å–∞–Ω–∞—Ç–æ—Ä–∏', correct: '–∏', options: ['–µ', '—é', '–∏'] },
        { id: 9, emoji: 'üßπ', hint: 'auf dem Boden (Ausnahme!)', stem: '–Ω–∞ –ø–æ–ª', correct: '—É', options: ['–µ', '—É', '–∞'] },
        { id: 10, emoji: 'üéì', hint: 'in der Vorlesung (-–∏—è)', stem: '–Ω–∞ –ª–µ–∫—Ü–∏', correct: '–∏', options: ['–µ', '—è', '–∏'] },
        { id: 11, emoji: 'üõå', hint: 'im Bett (-—å)', stem: '–≤ –∫—Ä–æ–≤–∞—Ç', correct: '–∏', options: ['–µ', '–∏', '—å'] },
        { id: 12, emoji: 'üñºÔ∏è', hint: 'im Museum (-–µ–π)', stem: '–≤ –º—É–∑–µ', correct: '–µ', options: ['–µ', '–∏', '—è'] }
    ];

    const app = document.getElementById('app');
    
    // Speichert User-Eingaben: { 1: '–µ', 2: '–∏', ... }
    let userState = {};

    // 1. Karten rendern
    function renderApp() {
        app.innerHTML = '';
        tasks.forEach(task => {
            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${task.id}`;

            // Buttons HTML generieren
            const buttonsHtml = task.options.map(opt => `
                <button class="option-btn" 
                        onclick="selectOption(${task.id}, '${opt}')"
                        data-val="${opt}">
                    ${opt}
                </button>
            `).join('');

            card.innerHTML = `
                <div class="emoji">${task.emoji}</div>
                <div class="hint">${task.hint}</div>
                <div class="word-container">
                    ${task.stem}<span class="gap" id="gap-${task.id}">_</span>
                </div>
                <div class="options-container">
                    ${buttonsHtml}
                </div>
            `;
            app.appendChild(card);
        });
    }

    // 2. Interaktion: Ausw√§hlen
    window.selectOption = function(id, value) {
        userState[id] = value;

        // L√ºcke visuell f√ºllen
        const gap = document.getElementById(`gap-${id}`);
        gap.textContent = value;
        gap.classList.remove('correct', 'wrong');
        gap.classList.add('filled');

        // Buttons aktualisieren
        const card = document.getElementById(`card-${id}`);
        const buttons = card.querySelectorAll('.option-btn');
        
        buttons.forEach(btn => {
            btn.classList.remove('active', 'mark-correct', 'mark-wrong');
            if(btn.dataset.val === value) {
                btn.classList.add('active');
            }
        });
    };

    // 3. √úberpr√ºfen
    window.checkAnswers = function() {
        tasks.forEach(task => {
            const userVal = userState[task.id];
            const gap = document.getElementById(`gap-${task.id}`);
            const card = document.getElementById(`card-${task.id}`);
            const buttons = card.querySelectorAll('.option-btn');

            // Reset visuelle Marker
            gap.classList.remove('correct', 'wrong');

            if (!userVal) return; // Nichts ausgew√§hlt

            if (userVal === task.correct) {
                // Richtig
                gap.classList.add('correct');
                // Button gr√ºn f√§rben
                buttons.forEach(btn => {
                    if (btn.dataset.val === userVal) btn.classList.add('mark-correct');
                });
            } else {
                // Falsch
                gap.classList.add('wrong');
                // Button visuell deaktivieren/falsch markieren
                buttons.forEach(btn => {
                    if (btn.dataset.val === userVal) btn.classList.add('mark-wrong');
                });
            }
        });
    };

    // 4. L√∂sung anzeigen
    window.showSolution = function() {
        // Erst alles zur√ºcksetzen
        resetUIOnly();

        tasks.forEach(task => {
            // State setzen (optional, falls danach nochmal "√úberpr√ºfen" geklickt wird)
            userState[task.id] = task.correct;

            // L√ºcke f√ºllen
            const gap = document.getElementById(`gap-${task.id}`);
            gap.textContent = task.correct;
            gap.classList.add('correct', 'filled');

            // Richtigen Button aktivieren
            const card = document.getElementById(`card-${task.id}`);
            const buttons = card.querySelectorAll('.option-btn');
            
            buttons.forEach(btn => {
                if(btn.dataset.val === task.correct) {
                    btn.classList.add('active', 'mark-correct');
                }
            });
        });
    };

    // 5. Zur√ºcksetzen
    window.resetAnswers = function() {
        userState = {};
        resetUIOnly();
        
        // L√ºckentext zur√ºcksetzen
        tasks.forEach(task => {
            const gap = document.getElementById(`gap-${task.id}`);
            gap.textContent = '_';
            gap.classList.remove('filled');
        });
    };

    // Hilfsfunktion: Setzt nur Klassen zur√ºck
    function resetUIOnly() {
        const gaps = document.querySelectorAll('.gap');
        gaps.forEach(g => g.classList.remove('correct', 'wrong'));

        const buttons = document.querySelectorAll('.option-btn');
        buttons.forEach(b => b.classList.remove('active', 'mark-correct', 'mark-wrong'));
    }

    // Init
    renderApp();

</script>

</body>
</html>